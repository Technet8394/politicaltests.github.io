<head>
<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:400,700" rel="stylesheet">
<link href='style.css' rel='stylesheet' type='text/css'>
<link href='auth/style.css' rel='stylesheet' type='text/css'>
<title>AuthValues Results</title>
<link rel="icon" type="x-icon" href="icon.png">
<link rel="shortcut icon" type="x-icon" href="icon.png">
<meta charset="utf-8">
<script>
  version = "Beta 1.0" 
</script>
</head>
<script type="application/javascript"
        src="ideologies.js">
</script>

<body>
<h1>AuthValues</h1>
<hr>

<h1>Results</h1>

<h2>Power Balance: <span class="weight-300" id="olig-label"></span></h2>
<div class="axis">
    <img id="img-oligarchy" src="auth/value_images/oligarchy.png" height="128pt"/>
    <div class="bar oligarchy" id="bar-oligarchy"><div class="text-wrapper" id="oligarchy"></div></div>
    <div class="bar autocracy" id="bar-autocracy"><div class="text-wrapper" id="autocracy"></div></div>
    <img id="img-autocracy" src="auth/value_images/autocracy.png" height="128pt"/>
</div>

<h2>Focus: <span class="weight-300" id="civil-label"></span></h2>
<div class="axis">
    <img id="img-civilvalue" src="auth/value_images/civil.png" height="128pt"/>
    <div class="bar civilvalue" id="bar-civilvalue"><div class="text-wrapper" id="civilvalue"></div></div>
    <div class="bar economic" id="bar-economic"><div class="text-wrapper" id="economic"></div></div>
    <img id="img-economic" src="auth/value_images/economic.png" height="128pt"/>
</div>

<h2>Approach: <span class="weight-300" id="elit-label"></span></h2>
<div class="axis">
    <img id="img-elitism" src="auth/value_images/elitism.png" height="128pt"/>
    <div class="bar elitism" id="bar-elitism"><div class="text-wrapper" id="elitism"></div></div>
    <div class="bar populism" id="bar-populism"><div class="text-wrapper" id="populism"></div></div>
    <img id="img-populism" src="auth/value_images/populism.png" height="128pt"/>
</div>

<h2>Crime: <span class="weight-300" id="preve-label"></span></h2>
<div class="axis">
    <img id="img-prevention" src="auth/value_images/prevention.png" height="128pt"/>
    <div class="bar prevention" id="bar-prevention"><div class="text-wrapper" id="prevention"></div></div>
    <div class="bar deterrence" id="bar-deterrence"><div class="text-wrapper" id="deterrence"></div></div>
    <img id="img-deterrence" src="auth/value_images/deterrence.png" height="128pt"/>
</div>

<h2>Culture: <span class="weight-300" id="diver-label"></span></h2>
<div class="axis">
    <img id="img-diverse" src="auth/value_images/diverse.png" height="128pt"/>
    <div class="bar diverse" id="bar-diverse"><div class="text-wrapper" id="diverse"></div></div>
    <div class="bar uniform" id="bar-uniform"><div class="text-wrapper" id="uniform"></div></div>
    <img id="img-uniform" src="auth/value_images/uniform.png" height="128pt"/>
</div>

<h2>Hierarchy: <span class="weight-300" id="ruleund-label"></span></h2>
<div class="axis">
    <img id="img-ruleunder" src="auth/value_images/ruleunder.png" height="128pt"/>
    <div class="bar ruleunder" id="bar-ruleunder"><div class="text-wrapper" id="ruleunder"></div></div>
    <div class="bar ruleover" id="bar-ruleover"><div class="text-wrapper" id="ruleover"></div></div>
    <img id="img-ruleover" src="auth/value_images/ruleover.png" height="128pt"/>
</div>

<h2>Leader: <span class="weight-300" id="bestsuit-label"></span></h2>
<div class="axis">
    <img id="img-bestsuited" src="auth/value_images/bestsuited.png" height="128pt"/>
    <div class="bar bestsuited" id="bar-bestsuited"><div class="text-wrapper" id="bestsuited"></div></div>
    <div class="bar hereditary" id="bar-hereditary"><div class="text-wrapper" id="hereditary"></div></div>
    <img id="img-hereditary" src="auth/value_images/hereditary.png" height="128pt"/>
</div>

<h2>Cooperation: <span class="weight-300" id="disun-label"></span></h2>
<div class="axis">
    <img id="img-disunity" src="auth/value_images/disunity.png" height="128pt"/>
    <div class="bar disunity" id="bar-disunity"><div class="text-wrapper" id="disunity"></div></div>
    <div class="bar authunity" id="bar-authunity"><div class="text-wrapper" id="authunity"></div></div>
    <img id="img-authunity" src="auth/value_images/authunity.png" height="128pt"/>
</div>

<h2>Closest Match: <span class="weight-300" id="ideology-label"></span></h2>
<p>Ideological matching is a work in progress, and is much less accurate than the values and axes.</p>
<p>You can send these results by copying and pasting the URL at the top of the page or using the image below. Think your matched ideology was wrong? Want to help us calibrate the test? Send the results along with your political ideology to us at eightvalues@gmail.com, or send us any comments, questions, or criticism. </p>
<hr/>
<img src="" id="banner">
<button class="button" onclick="location.href='auth.html';" style="background-color: #2196f3;">Back</button> <br>

<script>
    function getQueryVariable(variable)
    {
           var query = window.location.search.substring(1)
           var vars = query.split("&")
           for (var i=0;i<vars.length;i++) {
                   var pair = vars[i].split("=")
                   if(pair[0] == variable) {return pair[1]}
           }
           return(NaN);
    }

    function setBarValue(name, value) {
        innerel = document.getElementById(name)
        outerel = document.getElementById("bar-" + name)
        outerel.style.width = (value + "%")
        innerel.innerHTML = (value + "%")
        if (innerel.offsetWidth + 20 > outerel.offsetWidth) {
            innerel.style.visibility = "hidden"
        }
    }

    oligArray = ["Bureacracy","Oligarchy","Aristocracy","Anocracy","Despotism","Autocracy","Totalitarian Autocracy"]
    civilArray = ["Extreme Civil Focus","Civil Focus","Moderate Civil Focus","Balanced","Moderate Economic Focus","Economic Focus","Extreme Economic Focus"]
    elitArray = ["Plutocracy","Elitsm","Statism","Neutral","Majoritarianism","Populism","Democracy"]
    preveArray = ["Surveillance","Prevention","Moderation","Neutral","Discouragement","Deterrence","Anti-Surveillance"]
    diverArray = ["Multiculturalism","Polyculturalism","Diverse","Neutral","Assimilationism","Uniform","Theocracy"]
    ruleundArray = ["Social Contract","Rule-Under","Egalitarianism","Neutral","Staitsm","Rule-Over","Government Supreriority"]
    bestsuitArray = ["Technocracy","Noocracy","Meritocracy","Neutral","Semi-Hereditary","Hereditary","Extremely Herditary"]
    disunArray = ["Anti-Unity","Disunity","Limited Unity","Neutral","Cooperation","Unity","Strong Cooperation"]

    function setLabel(val,ary) {
        if (val > 100) { return "" } else
        if (val > 90) { return ary[0] } else
        if (val > 75) { return ary[1] } else
        if (val > 60) { return ary[2] } else
        if (val >= 40) { return ary[3] } else
        if (val >= 25) { return ary[4] } else
        if (val >= 10) { return ary[5] } else
        if (val >= 0) { return ary[6] } else
        	{return ""}
    }

    equality  = getQueryVariable("e")
    peace     = getQueryVariable("d")
    liberty   = getQueryVariable("g")
    progress  = getQueryVariable("s")
    wealth    = (100 - equality).toFixed(1)
    might     = (100 - peace   ).toFixed(1)
    authority = (100 - liberty ).toFixed(1)
    tradition = (100 - progress).toFixed(1)

    setBarValue("equality", equality)
    setBarValue("wealth", wealth)
    setBarValue("peace", peace)
    setBarValue("might", might)
    setBarValue("liberty", liberty)
    setBarValue("authority", authority)
    setBarValue("progress", progress)
    setBarValue("tradition", tradition)

    document.getElementById("economic-label").innerHTML = setLabel(equality, econArray)
    document.getElementById("diplomatic-label").innerHTML = setLabel(peace, diplArray)
    document.getElementById("state-label").innerHTML = setLabel(liberty, govtArray)
    document.getElementById("society-label").innerHTML = setLabel(progress, sctyArray)

    ideology = ""
    ideodist = Infinity
    for (var i = 0; i < ideologies.length; i++) {
        dist = 0
        dist += Math.pow(Math.abs(ideologies[i].stats.econ - equality), 2)
        dist += Math.pow(Math.abs(ideologies[i].stats.govt - liberty), 2)
        dist += Math.pow(Math.abs(ideologies[i].stats.dipl - peace), 1.73856063)
        dist += Math.pow(Math.abs(ideologies[i].stats.scty - progress), 1.73856063)
        if (dist < ideodist) {
            ideology = ideologies[i].name
            ideodist = dist
        }
    }
    document.getElementById("ideology-label").innerHTML = ideology

    function createImage(src, x, y, w, h) {
        img = new Image ()
        img.src = src
        img.onLoad = function() {
            ctx.drawImage(img, x, y, w, h)
        }
    }

    window.onload = function() {
        var c = document.createElement("canvas")
        var ctx = c.getContext("2d")
        c.width = 800;
        c.height = 650;
        ctx.fillStyle = "#EEEEEE"
        ctx.fillRect(0,0,800,650);

        img = document.getElementById("img-equality")
        ctx.drawImage(img, 20, 170, 100, 100);
        img = document.getElementById("img-wealth")
        ctx.drawImage(img, 680, 170, 100, 100)
        img = document.getElementById("img-might")
        ctx.drawImage(img, 20, 290, 100, 100)
        img = document.getElementById("img-peace")
        ctx.drawImage(img, 680, 290, 100, 100)
        img = document.getElementById("img-liberty")
        ctx.drawImage(img, 20, 410, 100, 100)
        img = document.getElementById("img-authority")
        ctx.drawImage(img, 680, 410, 100, 100)
        img = document.getElementById("img-tradition")
        ctx.drawImage(img, 20, 530, 100, 100)
        img = document.getElementById("img-progress")
        ctx.drawImage(img, 680, 530, 100, 100)

        ctx.fillStyle="#222222"
        ctx.fillRect(120, 180, 560, 80)
        ctx.fillRect(120, 300, 560, 80)
        ctx.fillRect(120, 420, 560, 80)
        ctx.fillRect(120, 540, 560, 80)
        ctx.fillStyle="#f44336"
        ctx.fillRect(120, 184, 5.6*equality-2, 72)
        ctx.fillStyle="#00897b"
        ctx.fillRect(682-5.6*wealth, 184, 5.6*wealth-2, 72)
        ctx.fillStyle="#ff9800"
        ctx.fillRect(120, 304, 5.6*might-2, 72)
        ctx.fillStyle="#03a9f4"
        ctx.fillRect(682-5.6*peace, 304, 5.6*peace-2, 72)
        ctx.fillStyle="#ffeb3b"
        ctx.fillRect(120, 424, 5.6*liberty-2, 72)
        ctx.fillStyle="#3f51b5"
        ctx.fillRect(682-5.6*authority, 424, 5.6*authority-2, 72)
        ctx.fillStyle="#8bc34a"
        ctx.fillRect(120, 544, 5.6*tradition-2, 72)
        ctx.fillStyle="#9c27b0"
        ctx.fillRect(682-5.6*progress, 544, 5.6*progress-2, 72)
        ctx.fillStyle="#222222"
        ctx.font="700 80px Montserrat"
        ctx.textAlign="left"
        ctx.fillText("8values", 20, 90)
        ctx.font="50px Montserrat"
        ctx.fillText(ideology, 20, 140)

        ctx.textAlign="left"
        if (equality  > 30) {ctx.fillText(equality + "%", 130, 237.5)}
        if (might     > 30) {ctx.fillText(might + "%", 130, 357.5)}
        if (liberty   > 30) {ctx.fillText(liberty + "%", 130, 477.5)}
        if (tradition > 30) {ctx.fillText(tradition + "%", 130, 597.5)}
        ctx.textAlign="right"
        if (wealth    > 30) {ctx.fillText(wealth + "%", 670, 237.5)}
        if (peace     > 30) {ctx.fillText(peace + "%", 670, 357.5)}
        if (authority > 30) {ctx.fillText(authority + "%", 670, 477.5)}
        if (progress  > 30) {ctx.fillText(progress + "%", 670, 597.5)}

        ctx.font="300 30px Montserrat"
        ctx.fillText("8values.github.io", 780, 60)
		    ctx.fillText(version, 780, 90)
        ctx.textAlign="center"
        ctx.fillText("Economic Axis: " + document.getElementById("economic-label").innerHTML, 400, 175)
        ctx.fillText("Diplomatic Axis: " + document.getElementById("diplomatic-label").innerHTML, 400, 295)
        ctx.fillText("Civil Axis: " + document.getElementById("state-label").innerHTML, 400, 415)
        ctx.fillText("Societal Axis: " + document.getElementById("society-label").innerHTML, 400, 535)

        document.getElementById("banner").src = c.toDataURL();
    }
    </script>
</body>
